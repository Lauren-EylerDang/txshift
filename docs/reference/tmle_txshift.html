<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute Targeted Minimum Loss-Based Estimate of Shifted Treatment Parameter — tmle_txshift • txshift</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Compute Targeted Minimum Loss-Based Estimate of Shifted Treatment Parameter — tmle_txshift" />

<meta property="og:description" content="This is the primary user-facing wrapper function to be used in invoking the
procedure to obtain targeted maximum likelihood / targeted minimum loss-based
estimates (TMLE) of the causal parameter discussed in Díaz and van der Laan
(2013) and Díaz and van der Laan (2018)." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">txshift</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro_txshift.html">Targeted Learning with Stochastic Treatment Regimes</a>
    </li>
    <li>
      <a href="../articles/ipcw_txshift.html">IPCW-TMLEs with Stochastic Treatment Regimes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/nhejazi/txshift">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute Targeted Minimum Loss-Based Estimate of Shifted Treatment Parameter</h1>
    <small class="dont-index">Source: <a href='https://github.com/nhejazi/txshift/blob/master/R/tmle-txshift.R'><code>R/tmle-txshift.R</code></a></small>
    <div class="hidden name"><code>tmle_txshift.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This is the primary user-facing wrapper function to be used in invoking the
procedure to obtain targeted maximum likelihood / targeted minimum loss-based
estimates (TMLE) of the causal parameter discussed in Díaz and van der Laan
(2013) and Díaz and van der Laan (2018).</p>
    
    </div>

    <pre class="usage"><span class='fu'>tmle_txshift</span>(<span class='no'>W</span>, <span class='no'>A</span>, <span class='no'>Y</span>, <span class='kw'>C</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>, <span class='fu'>length</span>(<span class='no'>Y</span>)), <span class='kw'>V</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>delta</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>fluc_method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"standard"</span>, <span class='st'>"weighted"</span>), <span class='kw'>eif_tol</span> <span class='kw'>=</span> <span class='fl'>1</span>/<span class='fu'>length</span>(<span class='no'>Y</span>),
  <span class='kw'>max_iter</span> <span class='kw'>=</span> <span class='fl'>10000</span>, <span class='kw'>ipcw_fit_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>fit_type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"glm"</span>, <span class='st'>"sl"</span>,
  <span class='st'>"fit_spec"</span>), <span class='kw'>sl_lrnrs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>), <span class='kw'>g_fit_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>fit_type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"glm"</span>, <span class='st'>"sl"</span>,
  <span class='st'>"fit_spec"</span>), <span class='kw'>nbins</span> <span class='kw'>=</span> <span class='fl'>35</span>, <span class='kw'>bin_method</span> <span class='kw'>=</span> <span class='st'>"dhist"</span>, <span class='kw'>bin_estimator</span> <span class='kw'>=</span>
  <span class='kw pkg'>condensier</span><span class='kw ns'>::</span><span class='no'><a href='http://www.rdocumentation.org/packages/condensier/topics/speedglmR6'>speedglmR6</a></span>$<span class='fu'>new</span>(), <span class='kw'>parfit</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>sl_lrnrs_dens</span> <span class='kw'>=</span> <span class='kw'>NULL</span>),
  <span class='kw'>Q_fit_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>fit_type</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"glm"</span>, <span class='st'>"sl"</span>, <span class='st'>"fit_spec"</span>), <span class='kw'>glm_formula</span> <span class='kw'>=</span>
  <span class='st'>"Y ~ ."</span>, <span class='kw'>sl_lrnrs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>), <span class='kw'>eif_reg_spec</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>ipcw_efficiency</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>ipcw_fit_spec</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>gn_fit_spec</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>Qn_fit_spec</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>W</th>
      <td><p>A <code>matrix</code>, <code>data.frame</code>, or similar corresponding to a
set of baseline covariates.</p></td>
    </tr>
    <tr>
      <th>A</th>
      <td><p>A <code>numeric</code> vector corresponding to a treatment variable. The
parameter of interest is defined as a location shift of this quantity.</p></td>
    </tr>
    <tr>
      <th>Y</th>
      <td><p>A <code>numeric</code> vector corresponding to an outcome variable.</p></td>
    </tr>
    <tr>
      <th>C</th>
      <td><p>A <code>numeric</code> binary vector giving information on whether a given
observation was subject to censoring. This is used to compute an IPCW-TMLE
in cases where two-stage sampling is performed. The default assumes that no
censoring was present (i.e., a two-stage design was NOT used). N.B., this is
equivalent to the term <!-- %\Delta in the notation used in the original Rose and -->
van der Laan manuscript that introduced/formulated IPCW-TML estimators.</p></td>
    </tr>
    <tr>
      <th>V</th>
      <td><p>The covariates that are used in determining the sampling procedure
that gives rise to censoring. The default is <code>NULL</code> and corresponds to
scenarios in which there is no censoring (in which case all values in the
preceding argument <code>C</code> must be uniquely 1. To specify this, pass in a
NAMED <code>list</code> identifying variables amongst W, A, Y that are thought to
have played a role in defining the sampling/censoring mechanism (C).</p></td>
    </tr>
    <tr>
      <th>delta</th>
      <td><p>A <code>numeric</code> value indicating the shift in the treatment to
be used in defining the target parameter. This is defined with respect to
the scale of the treatment (A).</p></td>
    </tr>
    <tr>
      <th>fluc_method</th>
      <td><p>The method to be used in submodel fluctuation step of
the TMLE computation. The choices are "standard" and "weighted".</p></td>
    </tr>
    <tr>
      <th>eif_tol</th>
      <td><p>A <code>numeric</code> giving the convergence criterion for the TML
estimator. This is the the maximum mean of the efficient influence function
(EIF) to be used in declaring convergence (theoretically, should be zero).</p></td>
    </tr>
    <tr>
      <th>max_iter</th>
      <td><p>A <code>numeric</code> integer giving the maximum number of steps
to be taken in iterating to a solution of the efficient influence function.</p></td>
    </tr>
    <tr>
      <th>ipcw_fit_args</th>
      <td><p>A <code>list</code> of arguments, all but one of which are
passed to <code>est_ipcw</code>. For details, please consult the documentation for
<code>est_ipcw</code>. The first element of this (i.e., <code>fit_type</code>) is used
to determine how this regression is fit: "glm" for generalized linear model,
"sl" for a Super Learner, and "fit_spec" a user-specified input of the form
produced by <code>est_ipcw</code>. NOTE THAT this first argument is not passed to
<code>est_ipcw</code>.</p></td>
    </tr>
    <tr>
      <th>g_fit_args</th>
      <td><p>A <code>list</code> of arguments, all but one of which are passed
to <code>est_g</code>. For further details, please consult the documentation for
<code>est_g</code>. The first element of this (i.e., <code>fit_type</code>) is used to
determine how this regression is fit: "glm" for a generalized linear model
for fitting densities via the <code>condensier</code> package, "sl" for <code>sl3</code>
learners used to fit Super Learner to densities via <code>Lrnr_condensier</code>,
and "fit_spec" to user-specified input of the form produced by <code>est_g</code>.
NOTE THAT this first argument is not passed to <code>est_g</code>.</p></td>
    </tr>
    <tr>
      <th>Q_fit_args</th>
      <td><p>A <code>list</code> of arguments, all but one of which are passed
to <code>est_Q</code>. For further details, please consult the documentation for
<code>est_Q</code>. The first element of this (i.e., <code>fit_type</code>) is used to
determine how this regression is fit: "glm" for a generalized linear model
for the outcome regression, "sl" for <code>sl3</code> learners used to fit a Super
Learner for the outcome regression, and "fit_spec" to user-specified input
of the form produced by <code>est_Q</code>. NOTE THAT this first argument is not
passed to <code>est_g</code>.</p></td>
    </tr>
    <tr>
      <th>eif_reg_spec</th>
      <td><p>Whether a flexible function ought to be used in the
computation of a targeting step for the censored data case. By default, the
method used is a nonparametric regression based on the Highly Adaptive LASSO
(from package <code>hal9001</code>) is used. If set to <code>FALSE</code>, then a simple
linear regression model is assumed. In this step, the efficient influence
function (EIF) is regressed against the covariates that contribute to the
censoring mechanism (i.e., EIF ~ V | C = 1).</p></td>
    </tr>
    <tr>
      <th>ipcw_efficiency</th>
      <td><p>Whether to invoke an augmentation of the IPCW-TMLE
procedure that performs an iterative process to ensure efficiency of the
resulting estimate. The default is <code>TRUE</code>; only set to <code>FALSE</code> if
possible inefficiency of the IPCW-TMLE is not a concern.</p></td>
    </tr>
    <tr>
      <th>ipcw_fit_spec</th>
      <td><p>User-specified version of the argument above for fitting
the censoring mechanism (<code>ipcw_fit_args</code>). Consult the documentation
for that argument for details on how to properly use this. In general, this
should only be used by advanced users familiar with both the underlying
theory and this software implementation of said theory.</p></td>
    </tr>
    <tr>
      <th>gn_fit_spec</th>
      <td><p>User-specified version of the argument above for fitting
the censoring mechanism (<code>g_fit_args</code>). Consult the documentation for
that argument for details on how to properly use this. In general, this
should only be used by advanced users familiar with both the underlying
theory and this software implementation of said theory.</p></td>
    </tr>
    <tr>
      <th>Qn_fit_spec</th>
      <td><p>User-specified version of the argument above for fitting
the censoring mechanism (<code>Q_fit_args</code>). Consult the documentation for
that argument for details on how to properly use this. In general, this
should only be used by advanced users familiar with both the underlying
theory and this software implementation of said theory.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>S3 object of class <code>txshift</code> containing the results of the
 procedure to compute a TML estimate of the treatment shift parameter.</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Nima Hejazi, David Benkeser, Mark van der Laan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>


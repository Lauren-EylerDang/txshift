<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate Counterfactual Mean Under Stochastic Shift in Exposure — txshift • txshift</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Estimate Counterfactual Mean Under Stochastic Shift in Exposure — txshift" />
<meta property="og:description" content="Estimate Counterfactual Mean Under Stochastic Shift in Exposure" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">txshift</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/intro_txshift.html">Targeted Learning with Stochastic Treatment Regimes</a>
    </li>
    <li>
      <a href="../articles/ipcw_txshift.html">IPCW-TMLEs with Stochastic Treatment Regimes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/nhejazi/txshift">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Counterfactual Mean Under Stochastic Shift in Exposure</h1>
    <small class="dont-index">Source: <a href='https://github.com/nhejazi/txshift/blob/master/R/txshift.R'><code>R/txshift.R</code></a></small>
    <div class="hidden name"><code>txshift.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimate Counterfactual Mean Under Stochastic Shift in Exposure</p>
    </div>

    <pre class="usage"><span class='fu'>txshift</span>(
  <span class='no'>W</span>,
  <span class='no'>A</span>,
  <span class='no'>Y</span>,
  <span class='kw'>C</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>Y</span>)),
  <span class='kw'>V</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>delta</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>estimator</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"tmle"</span>, <span class='st'>"onestep"</span>),
  <span class='kw'>fluctuation</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"standard"</span>, <span class='st'>"weighted"</span>),
  <span class='kw'>max_iter</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='kw'>ipcw_fit_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>fit_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"glm"</span>, <span class='st'>"sl"</span>, <span class='st'>"fit_spec"</span>), <span class='kw'>sl_learners</span> <span class='kw'>=</span> <span class='kw'>NULL</span>),
  <span class='kw'>g_fit_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>fit_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"hal"</span>, <span class='st'>"sl"</span>, <span class='st'>"fit_spec"</span>), <span class='kw'>n_bins</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>10</span>, <span class='fl'>25</span>), <span class='kw'>grid_type</span>
    <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"equal_range"</span>, <span class='st'>"equal_mass"</span>), <span class='kw'>lambda_seq</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span>(-<span class='fl'>1</span>, -<span class='fl'>13</span>, <span class='kw'>length</span> <span class='kw'>=</span> <span class='fl'>300</span>)),
    <span class='kw'>use_future</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>sl_learners_density</span> <span class='kw'>=</span> <span class='kw'>NULL</span>),
  <span class='kw'>Q_fit_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>fit_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"glm"</span>, <span class='st'>"sl"</span>, <span class='st'>"fit_spec"</span>), <span class='kw'>glm_formula</span> <span class='kw'>=</span> <span class='st'>"Y ~ ."</span>,
    <span class='kw'>sl_learners</span> <span class='kw'>=</span> <span class='kw'>NULL</span>),
  <span class='kw'>eif_reg_type</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"hal"</span>, <span class='st'>"glm"</span>),
  <span class='kw'>ipcw_efficiency</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>ipcw_fit_spec</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>gn_fit_spec</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>Qn_fit_spec</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>W</th>
      <td><p>A <code>matrix</code>, <code>data.frame</code>, or similar containing a set of
baseline covariates.</p></td>
    </tr>
    <tr>
      <th>A</th>
      <td><p>A <code>numeric</code> vector corresponding to a treatment variable. The
parameter of interest is defined as a location shift of this quantity.</p></td>
    </tr>
    <tr>
      <th>Y</th>
      <td><p>A <code>numeric</code> vector of the observed outcomes.</p></td>
    </tr>
    <tr>
      <th>C</th>
      <td><p>A <code>numeric</code> indicator for whether a given observation was
subject to censoring, used to compute an IPC-weighted estimator in cases
where two-stage sampling is performed. The default assumes no censoring.</p></td>
    </tr>
    <tr>
      <th>V</th>
      <td><p>The covariates that are used in determining the sampling procedure
that gives rise to censoring. The default is <code>NULL</code> and corresponds to
scenarios in which there is no censoring (in which case all values in the
preceding argument <code>C</code> must be uniquely 1). To specify this, pass in a
<code>character</code> vector identifying variables amongst W, A, Y thought to
have played a role in defining the sampling/censoring mechanism (C). This
argument also accepts a <code>data.table</code> (or similar) object composed of
combinations of variables W, A, Y; use of this option is NOT recommended.</p></td>
    </tr>
    <tr>
      <th>delta</th>
      <td><p>A <code>numeric</code> value indicating the shift in the treatment to
be used in defining the target parameter. This is defined with respect to
the scale of the treatment (A).</p></td>
    </tr>
    <tr>
      <th>estimator</th>
      <td><p>The type of estimator to be fit, either <code>"tmle"</code> for
targeted maximum likelihood or <code>"onestep"</code> for a one-step estimator.</p></td>
    </tr>
    <tr>
      <th>fluctuation</th>
      <td><p>The method to be used in the submodel fluctuation step
(targeting step) to compute the TML estimator. The choices are "standard"
and "weighted" for where to place the auxiliary covariate in the logistic
tilting regression.</p></td>
    </tr>
    <tr>
      <th>max_iter</th>
      <td><p>A <code>numeric</code> integer giving the maximum number of steps
to be taken in iterating to a solution of the efficient influence function.</p></td>
    </tr>
    <tr>
      <th>ipcw_fit_args</th>
      <td><p>A <code>list</code> of arguments, all but one of which are
passed to <code><a href='est_ipcw.html'>est_ipcw</a></code>. For details, consult the documentation of
<code><a href='est_ipcw.html'>est_ipcw</a></code>. The first element (i.e., <code>fit_type</code>) is used
to determine how this regression is fit: generalized linear model ("glm")
or Super Learner ("sl"), and "fit_spec" a user-specified input of the form
produced by <code><a href='est_ipcw.html'>est_ipcw</a></code>. NOTE THAT this first argument is not
passed to <code><a href='est_ipcw.html'>est_ipcw</a></code>.</p></td>
    </tr>
    <tr>
      <th>g_fit_args</th>
      <td><p>A <code>list</code> of arguments, all but one of which are
passed to <code><a href='est_g.html'>est_g</a></code>. For details, consult the documentation of
<code><a href='est_g.html'>est_g</a></code>. The first element (i.e., <code>fit_type</code>) is used to
determine how this regression is fit: <code>"hal"</code> to estimate conditional
densities via the highly adaptive lasso (via <span class="pkg">haldensify</span>), <code>"sl"</code>
for <span class="pkg">sl3</span> learners used to fit Super Learner to densities via
<code><a href='https://tlverse.org/sl3/reference/Lrnr_haldensify.html'>Lrnr_haldensify</a></code> or similar, and <code>"fit_spec"</code> for
user-specified input of the form produced by <code><a href='est_g.html'>est_g</a></code>. NOTE that
this first argument is not passed to <code><a href='est_g.html'>est_g</a></code>.</p></td>
    </tr>
    <tr>
      <th>Q_fit_args</th>
      <td><p>A <code>list</code> of arguments, all but one of which are
passed to <code><a href='est_Q.html'>est_Q</a></code>. For details, consult the documentation for
<code><a href='est_Q.html'>est_Q</a></code>. The first element (i.e., <code>fit_type</code>) is used to
determine how this regression is fit: <code>"glm"</code> for a generalized linear
model for the outcome regression, <code>"sl"</code> for <span class="pkg">sl3</span> learners used
to fit a Super Learner for the outcome regression, and <code>"fit_spec"</code>
for user-specified input of the form produced by <code><a href='est_Q.html'>est_Q</a></code>. NOTE
that this first argument is not passed to <code><a href='est_g.html'>est_g</a></code>.</p></td>
    </tr>
    <tr>
      <th>eif_reg_type</th>
      <td><p>Whether a flexible nonparametric function ought to be
used in the dimension-reduced nuisance regression of the targeting step for
the censored data case. By default, the method used is a nonparametric
regression based on the Highly Adaptive Lasso (from <span class="pkg">hal9001</span>). Set
this to <code>"glm"</code> to instead use a simple linear regression model. In
this step, the efficient influence function (EIF) is regressed against
covariates contributing to the censoring mechanism (i.e., EIF ~ V | C = 1).</p></td>
    </tr>
    <tr>
      <th>ipcw_efficiency</th>
      <td><p>Whether to invoke an augmentation of the IPCW-TMLE
procedure that performs an iterative process to ensure efficiency of the
resulting estimate. The default is <code>TRUE</code>; only set to <code>FALSE</code> if
possible inefficiency of the IPCW-TMLE is not a concern.</p></td>
    </tr>
    <tr>
      <th>ipcw_fit_spec</th>
      <td><p>User-specified version of the argument above for
fitting the censoring mechanism (<code>ipcw_fit_args</code>). Consult the
documentation for that argument for details on how to properly use this. In
general, this should only be used by advanced users familiar with both the
underlying theory and this software implementation.</p></td>
    </tr>
    <tr>
      <th>gn_fit_spec</th>
      <td><p>User-specified version of the argument above for fitting
the treatment mechanism (<code>g_fit_args</code>). Consult the documentation for
that argument for details on how to properly use this. In general, this
should only be used by advanced users familiar with both the underlying
theory and this software implementation.</p></td>
    </tr>
    <tr>
      <th>Qn_fit_spec</th>
      <td><p>User-specified version of the argument above for fitting
the outcome mechanism (<code>Q_fit_args</code>). Consult the documentation for
that argument for details on how to properly use this. In general, this
should only be used by advanced users familiar with both the underlying
theory and this software implementation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>S3 object of class <code>txshift</code> containing the results of the
 procedure to compute a TML estimate of the treatment shift parameter.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>TODO</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'># TODO
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Nima Hejazi, David Benkeser.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


